require 'pry'
require "JavaPlot.jar"

java_import "com.panayotis.gnuplot.GNUPlotParameters"
java_import "com.panayotis.gnuplot.JavaPlot"
java_import "com.panayotis.gnuplot.dataset.FileDataSet"
java_import "com.panayotis.gnuplot.layout.StripeLayout"
java_import "com.panayotis.iodebug.Debug"
java_import "com.panayotis.gnuplot.plot.AbstractPlot"
java_import "com.panayotis.gnuplot.plot.DataSetPlot"
java_import "com.panayotis.gnuplot.style.NamedPlotColor"
java_import "com.panayotis.gnuplot.style.PlotStyle"
java_import "com.panayotis.gnuplot.style.Style"
java_import "com.panayotis.gnuplot.swing.JPlot"

class Plotter
  def make_java_array array
    r = Java::double[][array.size].new
    array.each.with_index do |e,i|
      r[i] = Java::double[e.size].new
      e.each.with_index do |f,j|
        r[i][j] = f
      end
    end
    r
  end
  def meh results, title
    p = JavaPlot.new(true)
    # JavaPlot.getDebugger.setLevel(Debug.VERBOSE)

    p.setTitle(title);
    p.getAxis("x").setLabel("cost");
    p.getAxis("y").setLabel("gamma");
    p.getAxis("z").setLabel("accuracy");

    p.newGraph3D();
    p.addPlot(make_java_array(results));
    binding.pry
    PlotStyle stl = p.getPlots.get(1).getPlotStyle
    stl.setStyle(Style::POINTS);
    stl.setLineType(NamedPlotColor::GOLDENROD);
    stl.setPointType(5);
    stl.setPointSize(8);

    p.plot
  end
end


results = DATA.read.split("\n").map{|line| line.split(' ').map{|e| e.to_f } }
plotter = Plotter.new
plotter.meh results, "foo"


__END__
-5.0 -15.0 48.14814814814815
-5.0 -3.0 48.14814814814815
-5.0 9.0 48.14814814814815
5.0 -15.0 54.37710437710438
5.0 -3.0 58.754208754208754
5.0 9.0 49.66329966329966
15.0 -15.0 67.67676767676768
15.0 -3.0 58.754208754208754
15.0 9.0 49.66329966329966
0.0 -9.0 55.555555555555564
0.0 3.0 49.66329966329966
10.0 -9.0 68.18181818181819
10.0 3.0 49.66329966329966
0.8578643762690498 -15.0 48.14814814814815
0.8578643762690498 -6.514718625761432 69.02356902356904
0.8578643762690498 1.9705627484771375 49.66329966329966
7.9289321881345245 -15.0 69.36026936026936
7.9289321881345245 -6.514718625761432 68.35016835016836
7.9289321881345245 1.9705627484771375 49.66329966329966
15.0 -6.514718625761432 68.35016835016836
15.0 1.9705627484771375 49.66329966329966
4.393398282201787 -10.757359312880716 68.85521885521887
4.393398282201787 -2.2720779386421475 53.03030303030303
11.464466094067262 -10.757359312880716 68.18181818181819
11.464466094067262 -2.2720779386421475 53.03030303030303
2.928932188134526 -15.0 48.14814814814815
2.928932188134526 -9.0 69.19191919191918
2.928932188134526 -3.0 58.754208754208754
7.9289321881345245 -9.0 68.18181818181819
7.9289321881345245 -3.0 58.754208754208754
12.928932188134526 -15.0 67.67676767676768
12.928932188134526 -9.0 68.18181818181819
12.928932188134526 -3.0 58.754208754208754
5.4289321881345245 -12.0 68.85521885521887
5.4289321881345245 -6.0 68.85521885521887
10.428932188134524 -12.0 67.84511784511784
10.428932188134524 -6.0 68.85521885521887
4.393398282201788 -15.0 50.841750841750844
4.393398282201788 -10.757359312880716 68.85521885521887
4.393398282201788 -6.514718625761432 68.35016835016836
7.9289321881345245 -10.757359312880716 68.18181818181819
11.464466094067262 -15.0 68.01346801346801
11.464466094067262 -6.514718625761432 68.35016835016836
6.161165235168156 -12.878679656440358 69.86531986531988
6.161165235168156 -8.636038969321074 67.84511784511784
9.696699141100893 -12.878679656440358 68.18181818181819
9.696699141100893 -8.636038969321074 68.18181818181817
3.6611652351681565 -15.0 48.14814814814815
3.6611652351681565 -12.0 56.73400673400673
3.6611652351681565 -9.0 69.36026936026936
6.161165235168156 -15.0 55.555555555555564
6.161165235168156 -12.0 68.68686868686869
6.161165235168156 -9.0 67.84511784511784
8.661165235168156 -15.0 68.35016835016835
8.661165235168156 -12.0 68.35016835016835
8.661165235168156 -9.0 68.18181818181819
4.911165235168156 -13.5 55.89225589225589
4.911165235168156 -10.5 68.68686868686869
7.411165235168156 -13.5 69.52861952861953
7.411165235168156 -10.5 68.35016835016836
4.393398282201788 -12.878679656440358 56.3973063973064
6.161165235168156 -10.757359312880716 67.34006734006734
7.928932188134524 -15.0 69.36026936026936
7.928932188134524 -12.878679656440358 67.84511784511785
7.928932188134524 -10.757359312880716 68.18181818181819
5.277281758684971 -13.939339828220179 55.555555555555564
5.277281758684971 -11.818019484660539 68.85521885521887
7.045048711651339 -13.939339828220179 70.03367003367003
7.045048711651339 -11.818019484660539 68.01346801346801